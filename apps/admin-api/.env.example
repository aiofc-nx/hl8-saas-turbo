# ============================================
# 应用基础配置
# ============================================

# 应用端口
APP_PORT=9528

# 运行环境
NODE_ENV=development

# Swagger 文档配置
DOC_SWAGGER_ENABLE=true
DOC_SWAGGER_PATH=api-docs

# ============================================
# 数据库配置（PostgreSQL）
# 根据 docker-compose.yml 中的 postgres 服务配置
# ============================================

# 数据库主机地址
DB_HOST=localhost

# 数据库端口
DB_PORT=5432

# 数据库用户名（对应 docker-compose.yml 中的 POSTGRES_USER）
DB_USERNAME=aiofix

# 数据库密码（对应 docker-compose.yml 中的 POSTGRES_PASSWORD）
DB_PASSWORD=aiofix

# 数据库名称（对应 docker-compose.yml 中的 POSTGRES_DB）
DB_NAME=hl8-platform

# 是否启用 SSL 连接
DB_SSL=false

# ============================================
# Redis 配置
# 根据 docker-compose.yml 中的 redis 服务配置
# ============================================

# Redis 模式（standalone/cluster/sentinel）
REDIS_MODE=standalone

# Redis 主机地址
REDIS_HOST=localhost

# Redis 端口（对应 docker-compose.yml 中的端口映射）
REDIS_PORT=6379

# Redis 密码（docker-compose.yml 中未设置密码，留空）
REDIS_PASSWORD=

# Redis 数据库编号
REDIS_DB=5

# ============================================
# JWT 配置
# ============================================

# JWT 密钥（生产环境必须修改为强随机密钥）
JWT_SECRET=JWT_SECRET-soybean-admin-nest!@#123.

# JWT 过期时间（秒），默认 7200（2小时）
JWT_EXPIRE_IN=7200

# 刷新令牌密钥（生产环境必须修改为强随机密钥）
REFRESH_TOKEN_SECRET=REFRESH_TOKEN_SECRET-soybean-admin-nest!@#123.

# 刷新令牌过期时间（秒），默认 43200（12小时）
REFRESH_TOKEN_EXPIRE_IN=43200

# ============================================
# Casbin 权限配置
# ============================================

# Casbin 模型文件路径
CASBIN_MODEL=model.conf

# 签名请求时间戳允许偏差（毫秒），默认 300000（5分钟）
SIGN_REQ_TIMESTAMP_DISPARITY=300000

# 签名请求随机数生存时间（秒），默认 300（5分钟）
SIGN_REQ_NONCE_TTL=300

# ============================================
# CORS 配置
# ============================================

# 是否启用 CORS
CORS_ENABLED=true

# 允许的源地址列表（逗号分隔）
CORS_ORIGIN=http://localhost:3000

# 允许的 HTTP 方法
CORS_METHODS=GET,HEAD,PUT,PATCH,POST,DELETE,OPTIONS

# 是否继续处理预检请求
CORS_PREFLIGHT_CONTINUE=false

# 预检请求成功状态码
CORS_OPTIONS_SUCCESS_STATUS=204

# 是否允许携带凭证
CORS_CREDENTIALS=true

# 预检请求缓存时间（秒）
CORS_MAX_AGE=3600

# ============================================
# 限流配置
# ============================================

# 时间窗口（毫秒），默认 60000（1分钟）
THROTTLER_TTL=60000

# 时间窗口内允许的最大请求数，默认 10
THROTTLER_LIMIT=10

# ============================================
# 加密配置
# ============================================

# AES 加密密钥（32字节）
CRYPTO_AES_KEY=12345678901234567890123456789012

# AES 初始化向量（16字节）
CRYPTO_AES_IV=1234567890123456

# RSA 私钥（PEM 格式）
CRYPTO_RSA_PRIVATE_KEY=-----BEGIN PRIVATE KEY-----
YOUR_DEFAULT_PRIVATE_KEY
-----END PRIVATE KEY-----

# RSA 公钥（PEM 格式）
CRYPTO_RSA_PUBLIC_KEY=-----BEGIN PUBLIC KEY-----
YOUR_DEFAULT_PUBLIC_KEY
-----END PUBLIC KEY-----

# ============================================
# 邮件服务配置（可选）
# ============================================

MAIL_HOST=smtp.example.com
MAIL_USERNAME=your-email@example.com
MAIL_PASSWORD=your-email-password
MAIL_PORT=587
MAIL_SECURE=false

# ============================================
# 文件存储配置（可选）
# ============================================

FILE_SYSTEM=public
FILE_MAX_SIZE=20971520

# ============================================
# AWS S3 配置（仅在 FILE_SYSTEM=s3 时需要）
# ============================================

AWS_REGION=
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_S3_BUCKET_NAME=
AWS_S3_ENDPOINT=

# ============================================
# MongoDB 配置（可选）
# 根据 docker-compose.yml 中的 mongodb 服务配置
# ============================================

MONGO_HOST=localhost
MONGO_PORT=27017
MONGO_USERNAME=aiofix
MONGO_PASSWORD=aiofix
MONGO_DATABASE=hl8-platform
